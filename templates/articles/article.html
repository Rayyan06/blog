{% extends "articles/base.html" %}
{% block content %}
<div class="content box container p-3 m-3">
    <div class="row">
        <h1>{{ article.title }}</h1> 
        <i class="far fa-thumbs-up" id="like-button" data-article="{{ article.id }}"></i>
    </div>
    
    <hr>
    {{ article.display_content|safe }}
</div>
<div class="comments box container p-3 m-3">
    <h2> Comments </h2>
    <div class="container py-3">
        <form action="{% url 'comment' article.id %}" method="POST">
            {% csrf_token %}
            
            <div class="form-group mb-3">
                {{ form.text }}
            </div>
            <div class="mb-3">
                <input class="btn btn-outline-primary" type="submit" value="Comment">
            </div>
        </form>
    </div>
     <div class='list-group'>
        {% for comment in article.comments.all %}
            <div class='list-group-item'>
                <div class="d-flex w-100 justify-content-between">
                    <small class='text-muted'>{{ comment.date }}</small>
                </div>
        

            <p class="mb-1">{{ comment.text }}</p>
            <small class='text-muted'>
                by <strong>{{ comment.user }}</strong>
            </small>
        </div>
        {% empty %}
            <p>No one has commented on this article yet. Be the first to comment!</p>
        {% endfor %}
    </div>
</div>
{% endblock %}


{% block js %}
<script src="{% static 'js/article.js' %}"></script>
{% endblock %}